{"version":3,"sources":["../src/config.js"],"names":["keyCase","text","toUpperCase","descCase","toLowerCase","replace","defaultConf","rc","files","params","stacks","filePath","SwizzleConfig","swizzleJson","state","Object","assign","conf","actions","addFiles","removeFiles","name","desc","defaultValue","generated","addParam","removeParam","file","addStack","removeStack","verbose","reduce","list","param","push","description","keys","stackName","filter","d","type","console","log","action","concat","find","findFile","existingParam","newParam","map","_","omit"],"mappings":"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","file":"config.js","sourcesContent":["import snakeCase from 'lodash.snakecase'\nimport unique from 'lodash.uniq'\n\n/**\n no fs operations, state changes only\n **/\n\nconst keyCase = (text) => snakeCase(text).toUpperCase()\nconst descCase = (text) => snakeCase(text).toLowerCase().replace(/_/g, ' ')\n\nexport const defaultConf = () => ({\n\trc: {},\n\tfiles: [],\n\tparams: [],\n\tstacks: {},\n\tfilePath: './swizzle.json'\n})\n\nexport class SwizzleConfig {\n\n\tconstructor(swizzleJson) {\n\t\tthis.state = Object.assign(defaultConf(), swizzleJson)\n\t}\n\n\tget stackName() {\n\t\treturn this.state.stackName\n\t}\n\n\tset stackName(name) {\n\t\tthis.state.stackName = name\n\t}\n\n\taddFiles({files}) {\n\t\tthis.state = conf(this.state, actions.addFiles(files))\n\t}\n\n\tremoveFiles({files}) {\n\t\tthis.state = conf(this.state, actions.removeFiles(files))\n\t}\n\n\taddParam({name, desc, defaultValue, generated}) {\n\t\tthis.state = conf(this.state, actions.addParam(name, desc, defaultValue, generated))\n\t}\n\n\tremoveParam({name}) {\n\t\tthis.state = conf(this.state, actions.removeParam(name))\n\t}\n\n\taddStack({name, params, file}) {\n\t\tthis.state = conf(this.state, actions.addStack(name, params, file))\n\t}\n\n\tremoveStack({name}) {\n\t\tthis.state = conf(this.state, actions.removeStack(name))\n\t}\n\n\tget files() {\n\t\treturn this.state.files.filter((d) => d)\n\t}\n\n\tlistParams({verbose}) {\n\t\treturn this.state.params.reduce((list, param) => {\n\t\t\tif (verbose) {\n\t\t\t\tlist.push({name: param.name, description: param.description, defaultValue: param.defaultValue})\n\t\t\t} else {\n\t\t\t\tlist.push(param.name)\n\t\t\t}\n\t\t\treturn list\n\t\t}, [])\n\t}\n\n\tlistStacks({verbose}) {\n\t\treturn Object.keys(this.state.stacks).reduce((list, name) => {\n\t\t\tif (verbose) {\n\t\t\t\tlist.push(Object.assign({}, this.state.stacks[name]))\n\t\t\t}\n\t\t\tlist.push({name})\n\t\t\treturn list\n\t\t}, [])\n\t}\n\n}\n\nconst actions = {\n\taddFiles(files) {\n\t\treturn {\n\t\t\ttype: 'add-files',\n\t\t\tfiles\n\t\t}\n\t},\n\tremoveFiles(files) {\n\t\tconsole.log(files, typeof files)\n\t\treturn {\n\t\t\ttype: 'remove-files',\n\t\t\tfiles\n\t\t}\n\t},\n\taddParam(name, description, defaultValue, generated) {\n\t\tif (!name) {\n\t\t\treturn\n\t\t}\n\t\tif (typeof description === 'undefined') {\n\t\t\tdescription = descCase(`Your-${name}`)\n\t\t}\n\t\tif (typeof defaultValue === 'undefined') {\n\t\t\tif (generated) {\n\t\t\t\tdefaultValue = 'generated'\n\t\t\t} else {\n\t\t\t\tdefaultValue = keyCase(`Your-${name}`)\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\ttype: 'add-param',\n\t\t\tparam: {\n\t\t\t\tname,\n\t\t\t\tdescription,\n\t\t\t\tdefaultValue,\n\t\t\t\tgenerated\n\t\t\t}\n\t\t}\n\t},\n\tremoveParam(name) {\n\t\treturn {\n\t\t\ttype: 'remove-param',\n\t\t\tname\n\t\t}\n\t},\n\taddStack(name, params, file) {\n\t\treturn {\n\t\t\ttype: 'add-stack',\n\t\t\tname,\n\t\t\tparams,\n\t\t\tfile\n\t\t}\n\t},\n\tremoveStack(name) {\n\t\treturn {\n\t\t\ttype: 'remove-stack',\n\t\t\tname\n\t\t}\n\t}\n}\n\nfunction files(state, action) {\n\tswitch (action.type) {\n\t\tcase 'add-files':\n\t\t\treturn unique(state.concat(action.files))\n\t\tcase 'remove-files':\n\t\t\treturn state.filter((file) => !action.files.find((findFile) => file === findFile))\n\t}\n\treturn state\n}\n\nfunction params(state, action) {\n\tswitch (action.type) {\n\t\tcase 'add-param':\n\t\t\tconst existingParam = state.find((d) => d.name === action.param.name)\n\t\t\tconst newParam = {}\n\t\t\tObject.assign(newParam, existingParam, action.param)\n\t\t\tif (action.param.generated !== true) {\n\t\t\t\tif (existingParam && existingParam.generated === true) {\n\t\t\t\t\tnewParam.generated = true\n\t\t\t\t} else {\n\t\t\t\t\tdelete newParam.generated\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (existingParam) {\n\t\t\t\treturn state.map((param) => {\n\t\t\t\t\tif (param.name === newParam.name) {\n\t\t\t\t\t\treturn newParam\n\t\t\t\t\t}\n\t\t\t\t\treturn param\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn state.filter((d) => d.name !== action.param.name).concat(newParam)\n\t\tcase 'remove-param':\n\t\t\treturn state.filter((d) => d.name !== action.name)\n\t}\n\treturn state\n}\n\nfunction stacks(state, action) {\n\tswitch (action.type) {\n\t\tcase 'add-stack':\n\t\t\treturn Object.assign({}, state, {[action.name]: {params: action.params, file: action.file}})\n\t\tcase 'remove-stack':\n\t\t\treturn _.omit(state, action.name)\n\t}\n\treturn state\n}\n\nfunction conf(state, action) {\n\tswitch (action.type) {\n\t\tcase 'add-files':\n\t\tcase 'remove-files':\n\t\t\treturn Object.assign(state, {files: files(state.files, action)})\n\t\tcase 'add-param':\n\t\tcase 'remove-param':\n\t\t\treturn Object.assign(state, {params: params(state.params, action)})\n\t\tcase 'add-stack':\n\t\tcase 'remove-stack':\n\t\t\treturn Object.assign(state, {stacks: stacks(state.stacks, action)})\n\t}\n\treturn state\n}\n"]}